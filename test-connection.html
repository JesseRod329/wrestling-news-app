<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RingStats Data Test</title>
    <style>
        body { font-family: sans-serif; background: #111; color: #eee; }
        h1 { color: #e9242a; }
        pre { background: #222; padding: 1rem; border-radius: 8px; white-space: pre-wrap; word-break: break-all; }
    </style>
</head>
<body>
    <h1>RingStats Connection Test</h1>
    <p>Checking connection to Supabase... Check the developer console (F12) for results.</p>
    <div id="results"></div>

    <!-- THIS LINE IS THE CRUCIAL FIX -->
    <!-- 1. Include the Supabase library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        // 2. Add your Supabase credentials here (with quotes)
        const SUPABASE_URL = 'https://bygoobydskfwvdtmgluh.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ5Z29vYnlkc2tmd3ZkdG1nbHVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2NzE2NjMsImV4cCI6MjA2OTI0NzY2M30.IS1RhpF8pauXaWXREOpBNzJYwDwhzxjYrDVdtgN_j2k';

        // 3. Initialize the Supabase client
        const { createClient } = supabase; // Get the createClient function from the global supabase object
        const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        const resultsDiv = document.getElementById('results');

        // 4. Create a function to fetch the data
        async function fetchWrestlers() {
            resultsDiv.innerHTML = '<p>Fetching wrestlers from Supabase...</p>';

            // Use our 'supabaseClient' variable here
            const { data, error } = await supabaseClient.from('wrestlers').select('*');

            if (error) {
                console.error("Error fetching data:", error);
                resultsDiv.innerHTML = `<p style="color:red;">Error fetching data:</p><pre>${JSON.stringify(error, null, 2)}</pre>`;
            } else {
                console.log("Success! Here is your data:", data);
                resultsDiv.innerHTML = `<p style="color:lightgreen;">Success! Found ${data.length} wrestlers:</p><pre>${JSON.stringify(data, null, 2)}</pre>`;
            }
        }

        // 5. Run the function when the page loads
        fetchWrestlers();

    </script>
</body>
</html>